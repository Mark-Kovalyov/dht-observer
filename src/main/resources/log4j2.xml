<?xml version="1.0" encoding="UTF-8"?>
<Configuration>
    <Appenders>

        <Console name="Console" target="SYSTEM_OUT">
            <!--PatternLayout pattern="%highlight{[%-5p] %-3tid : %c{1} %m%n}{FATAL=Bright red blink, ERROR=Bright red, WARN=Bright yellow, INFO=Bright green, DEBUG=Bright cyan, TRACE=Bright cyan}"/-->
            <PatternLayout pattern="%highlight{[%-5p] %-3tid : %c %m%n}{FATAL=Bright red blink, ERROR=Bright red, WARN=Bright yellow, INFO=Bright green, DEBUG=Bright cyan, TRACE=Bright cyan}"/>
        </Console>

        <RollingFile
                name="RollingFileAppender"
                fileName="/bigdata/dht-observer/logs/application.log"
                filePattern="/bigdata/dht-observer/logs/application.%d{yyyy-MM-dd-HH}.log.gz"
                ignoreExceptions="true">
            <PatternLayout>
                <Pattern>%d{yyyy-MM-dd HH:mm:ss} [%-5p] %-3tid : %c{1} %m%n</Pattern>
            </PatternLayout>
            <Policies>
                <TimeBasedTriggeringPolicy interval="1"/>
            </Policies>
            <!--DefaultRolloverStrategy max="5" /-->
        </RollingFile>

        <!--File name="PgSecuredAppender" fileName="./logs/postgres.log" append="false">
            <MarkerFilter marker="SECURED" onMatch="DENY" onMismatch="NEUTRAL"/>
            <PatternLayout>
                <Pattern>%d{yyyy-MM-dd HH:mm:ss} [%-5p] %-3tid : %c{1} %m%n</Pattern>
            </PatternLayout>
        </File-->

        <File name="DhtListenersFileAppender" fileName="./logs/dht-listeners.log" append="false">
            <PatternLayout>
                <Pattern>%d{yyyy-MM-dd HH:mm:ss} [%-5p] %-3tid : %c{1} %m%n</Pattern>
            </PatternLayout>
        </File>

        <Routing name="DhtListenersRoutingAppender">
            <Routes pattern="${ctx:shortCode}">
                <Route>
                    <File name="DhtListenersFileAppender" fileName="./logs/dht-listeners-${ctx:shortCode}.log" append="false">
                        <PatternLayout>
                            <Pattern>%d{yyyy-MM-dd HH:mm:ss} [%-5p] %-3tid : %c{1} %m%n</Pattern>
                        </PatternLayout>
                    </File>
                </Route>
            </Routes>
        </Routing>

        <Null name="null" />

    </Appenders>

    <Loggers>

        <!-- Classic loggers-appenders -->

        <Root level="trace">
            <AppenderRef ref="Console"             level="trace"/>
            <AppenderRef ref="RollingFileAppender" level="trace"/>
        </Root>

        <Logger name="com.datastax" level="info" additivity="false">
            <AppenderRef ref="Console"             level="trace"/>
            <AppenderRef ref="RollingFileAppender" level="trace"/>
        </Logger>

        <Logger name="io.netty" level="info" additivity="false">
            <AppenderRef ref="Console"             level="trace"/>
            <AppenderRef ref="RollingFileAppender" level="trace"/>
        </Logger>

        <!-- Routing-based appenders -->

        <Logger name="dhtlisteners" level="trace" additivity="false">
            <AppenderRef ref="Console" />
            <AppenderRef ref="DhtListenersRoutingAppender"/>
        </Logger>

    </Loggers>

</Configuration>